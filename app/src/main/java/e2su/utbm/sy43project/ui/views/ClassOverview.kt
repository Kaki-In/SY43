package e2su.utbm.sy43project.ui.views

import android.app.Activity
import android.util.Log
import androidx.compose.foundation.layout.Column
import androidx.compose.foundation.layout.Spacer
import androidx.compose.foundation.layout.fillMaxWidth
import androidx.compose.foundation.layout.height
import androidx.compose.foundation.layout.padding
import androidx.compose.foundation.rememberScrollState
import androidx.compose.foundation.verticalScroll
import androidx.compose.material3.Text
import androidx.compose.runtime.Composable
import androidx.compose.ui.Modifier
import androidx.compose.ui.platform.LocalContext
import androidx.compose.ui.tooling.preview.Preview
import androidx.compose.ui.unit.dp
import androidx.navigation.NavHostController
import e2su.tools.class_wrap.DEFAULT_EXPORTERS_MAPS
import e2su.utbm.sy43project.R
import e2su.utbm.sy43project.ui.components.ActivityPost
import e2su.utbm.sy43project.ui.components.HomeButton
import e2su.utbm.sy43project.ui.components.NoobleFooter
import e2su.utbm.sy43project.ui.components.NoobleHeader
import org.json.JSONObject
import org.json.JSONTokener

@Composable
fun ClassOverview(
    modifier: Modifier = Modifier
) {
    Column(){
        Text(
            text = "Titre UE",
            modifier = modifier.padding(16.dp)
        )
        Spacer(modifier = modifier.height(16.dp))

        // Cr√©ation du cours
        val jsonData = """{"type":"container","data":{"children":[{"data":{"children":[{"data":"Ceci est un texte brute dans un container vertical","type":"raw-text"},{"data":"Qu'est-ce que le Lorem Ipsum ?\nLe Lorem Ipsum est simplement un faux texte utilis\u00e9 dans l'industrie de l'impression et du traitement de texte. Depuis les ann\u00e9es 1500, il est consid\u00e9r\u00e9 comme le texte fictif standard, lorsque quelqu'un a pris une gal\u00e8re de caract\u00e8res pour la m\u00e9langer et cr\u00e9er un livre d'exemple typographique. Il est parvenu \u00e0 survivre non seulement cinq si\u00e8cles, mais aussi l'entr\u00e9e dans le traitement \u00e9lectronique du texte, sans \u00eatre essentiellement modifi\u00e9. Sa popularit\u00e9 a \u00e9t\u00e9 renforc\u00e9e dans les ann\u00e9es 1960 avec la sortie des feuilles Letraset contenant des passages de Lorem Ipsum, et plus r\u00e9cemment gr\u00e2ce aux logiciels de publication assist\u00e9e par ordinateur comme Aldus PageMaker qui incluent des versions de Lorem Ipsum.\nLe morceau standard de Lorem Ipsum utilis\u00e9 depuis les ann\u00e9es 1500 est reproduit ci-dessous pour ceux que cela int\u00e9resse. Les sections 1.10.32 et 1.10.33 de \"De Finibus Bonorum et Malorum\" par Cic\u00e9ron y sont \u00e9galement reproduites dans leur forme originale exacte, accompagn\u00e9es des versions anglaises traduites en 1914 par H. Rackham.","type":"raw-text"},{"data":"\n                        \u003Ch2\u003E\n                            \u003Cem\u003ECeci est un texte riche\u003C\/em\u003E\n                        \u003C\/h2\u003E\n                        \u003Cp\u003E\n                            \u003Cstrong\u003ECharles Stein\u003C\/strong\u003E est un statisticien am\u00e9ricain n\u00e9 le 22 mars 1920 et mort le 24 novembre 2016, professeur \u00e9m\u00e9rite de statistiques \u00e0 \u003Ca href=\"https:\/\/fr.wikipedia.org\/wiki\/Universit%C3%A9_Stanford\" target=\"_blank\"\u003E Stanford\u003C\/a\u003E.\n                            Il est connu pour le \u003Ca href=\"https:\/\/fr.wikipedia.org\/wiki\/Paradoxe_de_Stein\" target=\"_blank\"\u003Eparadoxe de Stein\u003C\/a\u003E en \u003Ca href=\"https:\/\/fr.wikipedia.org\/wiki\/Th%C3%A9orie_de_la_d%C3%A9cision\" target=\"_blank\"\u003Eth\u00e9orie de la d\u00e9cision\u003C\/a\u003E et pour la \u003Ca href=\"https:\/\/fr.wikipedia.org\/wiki\/M%C3%A9thode_de_Stein\" target=\"_blank\"\u003Em\u00e9thode de Stein\u003C\/a\u003E qui permet de d\u00e9montrer le \u003Ca href=\"https:\/\/fr.wikipedia.org\/wiki\/Th%C3%A9or%C3%A8me_central_limite\" target=\"_blank\"\u003E central limite\u003C\/a\u003E.\n                        \u003C\/p\u003E\n                        \u003Cp\u003E\n                            \u003Cstrong\u003EAuguste Van Assche\u003C\/strong\u003E, n\u00e9 le 5 juillet 1826 \u00e0 \u003Ca href=\"https:\/\/fr.wikipedia.org\/wiki\/Gand\" target=\"_blank\"\u003EGand\u003C\/a\u003E et mort le 24 f\u00e9vrier 1907, est un \u003Ca href=\"https:\/\/fr.wikipedia.org\/wiki\/Architecte\" target=\"_blank\"\u003Earchitecte\u003C\/a\u003E \u003Ca href=\"https:\/\/fr.wikipedia.org\/wiki\/Belgique\" target=\"_blank\"\u003Ebelge\u003C\/a\u003E, auteur de nombreuses restaurations et transformations de b\u00e2timents m\u00e9di\u00e9vaux en Belgique.\n                        \u003C\/p\u003E\n                                ","type":"rich-text"},{"data":"Bonjour","type":"raw-text"}],"is_wrapping":false,"is_horizontal":false},"type":"container"},{"data":"Ce qui suit est un container horizontal avec wrap (miam miam)","type":"raw-text"},{"data":{"children":[{"data":{"src":"https:\/\/tests-and-previews.flopcreation.fr\/downloads\/UTBM - Nooble\/TD1.zip","filename":"TD1.zip","description":"TD1 : Validation\/Remise \u00e0 Niveau PHP\/HTML\/CSS Fichier"},"type":"file"},{"data":{"src":"https:\/\/tests-and-previews.flopcreation.fr\/downloads\/UTBM - Nooble\/TD1.zip","filename":"TD2.zip","description":"TD2 : PHP objet, Javascript"},"type":"file"},{"data":{"src":"https:\/\/tests-and-previews.flopcreation.fr\/downloads\/UTBM - Nooble\/TD1.zip","filename":"TD3.zip","description":"TD3 : Version finale du site \"sans javascript\""},"type":"file"},{"data":{"src":"https:\/\/tests-and-previews.flopcreation.fr\/downloads\/UTBM - Nooble\/WE4A - Moodle Simplifi\u00e9 (devoir retir\u00e9).pdf","filename":"WE4A - Moodle Simplifi\u00e9 (devoir retir\u00e9).pdf","description":"Le cahier des charges : Le but du projet est de cr\u00e9er une version simplifi\u00e9e de Moodle, et le cahier des charges vous aidera \u00e0 mieux situer ce que nous voulons dire par l\u00e0. Vous devez utiliser Symfony pour pouvoir avoir une note sup\u00e9rieure \u00e0 15\/20."},"type":"file"}],"is_wrapping":true,"is_horizontal":true},"type":"container"},{"data":{"children":[{"data":"https:\/\/randomwordgenerator.com\/img\/picture-generator\/55e2dc434c50a814f1dc8460962e33791c3ad6e04e50744074267bd19f4ac2_640.jpg","type":"image"},{"data":"https:\/\/randomwordgenerator.com\/img\/picture-generator\/5fe4d0474255b10ff3d8992cc12c30771037dbf85254784b772779d69f4e_640.jpg","type":"image"}],"is_wrapping":true,"is_horizontal":true},"type":"container"},{"data":{"id":1,"html":"\u003Cp\u003E\n    Ceci est une activit\u00e9 interactive. \n\u003C\/p\u003E\n\n\u003Cbutton id=\"activity-button\"\u003E\n    !Cliquez-moi!\n\u003C\/button\u003E\n\u003Cbr\u003E\n","edit_html":"\n\u003Cp\u003E\n    Ceci est une activit\u00e9 interactive. \n\u003C\/p\u003E\n\n\u003Cbutton id=\"activity-button\"\u003E\n    !Cliquez-moi!\n\u003C\/button\u003E\n\u003Cbr\u003E\n\n\u003Cp\u003E\n    Cette activit\u00e9 est ici en mode \u00e9dition (ind\u00e9pendant)\n\u003C\/p\u003E\n\n\u003Cbutton class=\"icon-button\"\u003E\n    \u003Cimg src=\"\/images\/icons\/settings.png\"\/\u003E\n    \u003Cspan\u003E\u00c9diter...\u003C\/span\u003E\n\u003C\/button\u003E","javascript":"\nclass Activity\n{\n    constructor(id, args)\n    {\n        console.log(\"loading activity\");\n        this._text_url = args.text_url\n    }\n\n    onRender(div)\n    {\n        div.querySelector(\"button\").addEventListener(\"click\", async () =\u003E {\n            alert(await this.getDisplayedText());\n        })\n    }\n\n    async getDisplayedText()\n    {\n        let data = await fetch(this._text_url);\n        return await data.text();\n    }\n}","edit_javascript":"\nclass Activity\n{\n    constructor(id, args)\n    {\n        console.log(\"loading editable activity\");\n        this._text_url = args.text_url\n    }\n\n    onRender(div)\n    {\n        div.querySelector(\"button\").addEventListener(\"click\", async () =\u003E {\n            alert(await this.getDisplayedText());\n        })\n    }\n\n    async getDisplayedText()\n    {\n        let data = await fetch(this._text_url);\n        return await data.text();\n    }\n}","css":"","arguments":{"text_url":"\/activity-resources\/click-me-activity\/test"}},"type":"activity"},{"data":{"children":[{"data":{"src":"https:\/\/www.youtube.com\/embed\/lJIrF4YjHfQ?si=bNKfRgR0zomAqao8","width":560,"height":315,"permissions":["accelerometer","autoplay","clipboard-write","encrypted-media","gyroscope","picture-in-picture","web-share","fullscreen"]},"type":"integration"},{"data":"Qu'est-ce que le Lorem Ipsum ?\nLe Lorem Ipsum est simplement un faux texte utilis\u00e9 dans l'industrie de l'impression et du traitement de texte. Depuis les ann\u00e9es 1500, il est consid\u00e9r\u00e9 comme le texte fictif standard, lorsque quelqu'un a pris une gal\u00e8re de caract\u00e8res pour la m\u00e9langer et cr\u00e9er un livre d'exemple typographique. Il est parvenu \u00e0 survivre non seulement cinq si\u00e8cles, mais aussi l'entr\u00e9e dans le traitement \u00e9lectronique du texte, sans \u00eatre essentiellement modifi\u00e9. Sa popularit\u00e9 a \u00e9t\u00e9 renforc\u00e9e dans les ann\u00e9es 1960 avec la sortie des feuilles Letraset contenant des passages de Lorem Ipsum, et plus r\u00e9cemment gr\u00e2ce aux logiciels de publication assist\u00e9e par ordinateur comme Aldus PageMaker qui incluent des versions de Lorem Ipsum.\nLe morceau standard de Lorem Ipsum utilis\u00e9 depuis les ann\u00e9es 1500 est reproduit ci-dessous pour ceux que cela int\u00e9resse. Les sections 1.10.32 et 1.10.33 de \"De Finibus Bonorum et Malorum\" par Cic\u00e9ron y sont \u00e9galement reproduites dans leur forme originale exacte, accompagn\u00e9es des versions anglaises traduites en 1914 par H. Rackham.","type":"raw-text"}],"is_wrapping":false,"is_horizontal":true},"type":"container"},{"data":{"children":[{"data":"https:\/\/commondatastorage.googleapis.com\/gtv-videos-bucket\/sample\/BigBuckBunny.mp4","type":"video"},{"data":{"children":[{"data":"Qu'est-ce que le Lorem Ipsum ?\nLe Lorem Ipsum est simplement un faux texte utilis\u00e9 dans l'industrie de l'impression et du traitement de texte. Depuis les ann\u00e9es 1500, il est consid\u00e9r\u00e9 comme le texte fictif standard, lorsque quelqu'un a pris une gal\u00e8re de caract\u00e8res pour la m\u00e9langer et cr\u00e9er un livre d'exemple typographique. Il est parvenu \u00e0 survivre non seulement cinq si\u00e8cles, mais aussi l'entr\u00e9e dans le traitement \u00e9lectronique du texte, sans \u00eatre essentiellement modifi\u00e9. Sa popularit\u00e9 a \u00e9t\u00e9 renforc\u00e9e dans les ann\u00e9es 1960 avec la sortie des feuilles Letraset contenant des passages de Lorem Ipsum, et plus r\u00e9cemment gr\u00e2ce aux logiciels de publication assist\u00e9e par ordinateur comme Aldus PageMaker qui incluent des versions de Lorem Ipsum.\nLe morceau standard de Lorem Ipsum utilis\u00e9 depuis les ann\u00e9es 1500 est reproduit ci-dessous pour ceux que cela int\u00e9resse. Les sections 1.10.32 et 1.10.33 de \"De Finibus Bonorum et Malorum\" par Cic\u00e9ron y sont \u00e9galement reproduites dans leur forme originale exacte, accompagn\u00e9es des versions anglaises traduites en 1914 par H. Rackham.","type":"raw-text"},{"data":"https:\/\/www.soundhelix.com\/examples\/mp3\/SoundHelix-Song-1.mp3","type":"audio"}],"is_wrapping":false,"is_horizontal":false},"type":"container"}],"is_wrapping":false,"is_horizontal":true},"type":"container"},{"data":{"children":[{"data":"J'en profite pour glisser mon album","type":"raw-text"},{"data":{"src":"https:\/\/open.spotify.com\/embed\/album\/2UjSSrKiHFeFFb2WNMEv7X?utm_source=generator&theme=0","width":"auto","height":352,"permissions":["autoplay","clipboard-write","encrypted-media","fullscreen","picture-in-picture"]},"type":"integration"},{"data":"\u00c9coutez c'est cool","type":"raw-text"}],"is_wrapping":false,"is_horizontal":false},"type":"container"}],"is_wrapping":false,"is_horizontal":false}}"""

        Column (modifier = modifier
            .padding(10.dp)
            .verticalScroll(rememberScrollState())
        ) {

            DEFAULT_EXPORTERS_MAPS.createView(JSONObject(JSONTokener(jsonData)))

        }
    }
}


@Preview(showBackground = true)
@Composable
fun ActivityViewPreview() {
    ActivityView()
}